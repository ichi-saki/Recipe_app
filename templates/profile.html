{% extends "base.html" %}

{% block content %}
<div class="profile">
    <div class="header">
        <h2>{{user.username}}'s Profile</h2>
        {%if own_profile%}
            <p class="idicator">Your own profile</p>
        {%endif%}
    </div>

    {%if own_profile%}
    <div class="actions">
        <a href="{{url_for('recipes.create_recipe')}}" class="btn btn-primary">Create Recipe</a>
        <a href="{{ url_for('collections.create_collection') }}" class="btn btn-primary">Create Collection</a>
    </div>
    {%endif%}
    
    <div class="collections">
        <h3>Collections</h3>
        {% if collections %}
            <div class="grid">
                {% for collection in collections %}
                <div class="card">
                    <h4><a href="{{ url_for('collections.view_collection', collection_id=collection.collection_id) }}">{{collection.name}}</a></h4>
                    <p>{{collection.description}}</p>
                    <small>{{collection.recipe_count}} recipes</small>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p>{{user.username}} doesn't have any collection</p>
        {% endif %}
    </div>

    <div class="recipes">
        <h3>{{user.username}}'s Recipes</h3>
        {%if recipes%}
            <div class="recipe-grid">
                {% for recipe in recipes %}
                <div class="card">
                    <h4><a href="{{url_for('recipes.recipe', recipe_id=recipe.recipe_id)}}">{{recipe.title}}</a></h4>
                    <p>{{recipe.description}}</p>
                    <span class="category">{{recipe.category}}</span>
                    <div class="rating">
                        {{recipe.rating_ave}} ({{recipe.rating_count}} ratings)
                    </div>
                    <p><small>Posted: {{recipe.created[:10] }}</small></p>
                </div>
                {% endfor %}
            </div>
            {% else %}
                <p>{{user.username}} hasn't shared any recipes yet</p>
            {% endif %}
    </div>
</div>
{% endblock %}